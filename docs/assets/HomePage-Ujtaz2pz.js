import{c as S,j as t,g as T,a as W,r as x,u as G,_ as O,b as h,d as E,s as k,e as U,f as V,h as _,B as d,A as q,T as J,i as f,I as X,C as $,G as b,P as R,V as K,D as Q,k as Y,l as Z,m as C,H as tt,n as D,o as N,p as et,q as st,R as ot,t as at}from"./index-CDPcPa8R.js";const rt=S(t.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function nt(e){return T("MuiAvatar",e)}W("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const it=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],lt=e=>{const{classes:s,variant:a,colorDefault:r}=e;return V({root:["root",a,r&&"colorDefault"],img:["img"],fallback:["fallback"]},nt,s)},ct=k("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.root,s[a.variant],a.colorDefault&&s.colorDefault]}})(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:h({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:h({backgroundColor:e.palette.grey[400]},e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})))}]})),dt=k("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,s)=>s.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),xt=k(rt,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,s)=>s.fallback})({width:"75%",height:"75%"});function ht({crossOrigin:e,referrerPolicy:s,src:a,srcSet:r}){const[n,l]=x.useState(!1);return x.useEffect(()=>{if(!a&&!r)return;l(!1);let c=!0;const i=new Image;return i.onload=()=>{c&&l("loaded")},i.onerror=()=>{c&&l("error")},i.crossOrigin=e,i.referrerPolicy=s,i.src=a,r&&(i.srcset=r),()=>{c=!1}},[e,s,a,r]),n}const gt=x.forwardRef(function(s,a){const r=G({props:s,name:"MuiAvatar"}),{alt:n,children:l,className:c,component:i="div",slots:g={},slotProps:w={},imgProps:v,sizes:j,src:p,srcSet:o,variant:u="circular"}=r,B=O(r,it);let m=null;const M=ht(h({},v,{src:p,srcSet:o})),A=p||o,P=A&&M!=="error",y=h({},r,{colorDefault:!P,component:i,variant:u}),I=lt(y),[F,L]=E("img",{className:I.img,elementType:dt,externalForwardedProps:{slots:g,slotProps:{img:h({},v,w.img)}},additionalProps:{alt:n,src:p,srcSet:o,sizes:j},ownerState:y});return P?m=t.jsx(F,h({},L)):l||l===0?m=l:A&&n?m=n[0]:m=t.jsx(xt,{ownerState:y,className:I.fallback}),t.jsx(ct,h({as:i,ownerState:y,className:U(I.root,c),ref:a},B,{children:m}))}),H=S(t.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),z=S(t.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),pt=({icon:e,title:s,description:a,onClick:r})=>{const n=et();return t.jsxs(st,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"scale(1.02)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.15)"},"&:active":{transform:"scale(0.98)"},borderRadius:3,overflow:"hidden",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)",p:2},onClick:r,children:[t.jsx(d,{sx:{color:n.palette.primary.main,mb:2,display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:ot.cloneElement(e,{sx:{fontSize:"3rem",color:"inherit"}})}),t.jsxs(at,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:1,"&:last-child":{paddingBottom:2}},children:[t.jsx(f,{variant:"h6",component:"div",sx:{fontWeight:600,fontSize:"1rem",mb:1},children:s}),t.jsx(f,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.8rem",maxWidth:"80%"},children:a})]})]})},mt=()=>{const e=_(),[s]=x.useState({name:"Người dùng",avatar:"/avatar-placeholder.png"}),[a,r]=x.useState(0),[n,l]=x.useState([]),[c,i]=x.useState(null);x.useEffect(()=>{const o=localStorage.getItem("tryOnHistory");o&&l(JSON.parse(o))},[]);const g=o=>{switch(o){case"models":e("/models");break;case"clothes":e("/clothes");break;case"history":e("/try-on-history");break;default:console.log(`Navigating to ${o}`)}},w=o=>{i(o)},v=()=>{i(null)},j=()=>{e("/settings")},p=[{icon:t.jsx(D,{}),title:"Chọn người mẫu",onClick:()=>g("models")},{icon:t.jsx(N,{}),title:"Chọn trang phục",onClick:()=>g("clothes")},{icon:t.jsx(H,{}),title:"Lịch sử thử đồ",onClick:()=>g("history")},{icon:t.jsx(z,{}),title:"Cài đặt",onClick:j}];return t.jsxs(d,{sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",bgcolor:"#f5f5f7"},children:[t.jsx(q,{position:"static",elevation:0,sx:{bgcolor:"white",color:"text.primary"},children:t.jsxs(J,{sx:{minHeight:{xs:"56px"}},children:[t.jsx(f,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600,fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:"Ứng dụng thử đồ"}),t.jsx(d,{sx:{display:"flex",alignItems:"center"},children:t.jsx(gt,{alt:s.name,src:s.avatar,sx:{width:36,height:36,border:"2px solid #f0f0f0"}})}),t.jsx(X,{color:"inherit",onClick:j,children:t.jsx(z,{})})]})}),t.jsx(d,{sx:{flexGrow:1,overflow:"auto",pb:7},children:t.jsxs($,{sx:{py:3},maxWidth:"sm",children:[t.jsx(d,{sx:{px:1},children:t.jsx(b,{container:!0,spacing:2,children:p.map((o,u)=>t.jsx(b,{item:!0,xs:6,children:t.jsx(pt,{...o})},u))})}),n.length>0&&t.jsxs(d,{sx:{mt:4},children:[t.jsx(f,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:"Lịch sử thử đồ gần đây"}),t.jsx(b,{container:!0,spacing:2,children:n.slice(0,4).map(o=>t.jsx(b,{item:!0,xs:6,sm:3,children:t.jsxs(R,{elevation:3,sx:{position:"relative","&:hover .overlay":{opacity:1}},children:[t.jsx("img",{src:o.generatedImage,alt:"Ảnh thử đồ",style:{width:"100%",aspectRatio:"1/1",objectFit:"cover"}}),t.jsx(d,{className:"overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"rgba(0,0,0,0.5)",opacity:0,transition:"opacity 0.3s",cursor:"pointer"},onClick:()=>w(o.generatedImage),children:t.jsx(K,{sx:{color:"white",fontSize:40}})}),t.jsx(f,{variant:"caption",display:"block",align:"center",sx:{p:1},children:new Date(o.timestamp).toLocaleString()})]})},o.id))}),n.length>4&&t.jsx(d,{sx:{display:"flex",justifyContent:"center",mt:2},children:t.jsx(Button,{variant:"outlined",onClick:()=>g("history"),children:"Xem tất cả"})})]})]})}),t.jsx(Q,{open:!!c,onClose:v,maxWidth:"md",fullWidth:!0,children:t.jsx(Y,{children:c&&t.jsx("img",{src:c,alt:"Chi tiết ảnh",style:{width:"100%",maxHeight:"80vh",objectFit:"contain"}})})}),t.jsx(R,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1100,borderRadius:"16px 16px 0 0",overflow:"hidden",boxShadow:"0 -2px 10px rgba(0,0,0,0.1)"},elevation:3,children:t.jsxs(Z,{showLabels:!0,value:a,onChange:(o,u)=>{r(u)},sx:{height:60,"& .MuiBottomNavigationAction-root":{maxWidth:"none",py:1}},children:[t.jsx(C,{label:"Trang chủ",icon:t.jsx(tt,{})}),t.jsx(C,{label:"Người mẫu",icon:t.jsx(D,{})}),t.jsx(C,{label:"Trang phục",icon:t.jsx(N,{})}),t.jsx(C,{label:"Lịch sử",icon:t.jsx(H,{})})]})})]})};export{mt as default};
